{% extends 'sportif/base.html.twig' %}

{% block title %}Mes R√©clamations{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1 class="mb-4">üìå R√©clamations</h1>

    <!-- Filtre -->
    <form method="get" class="mb-4">
        <div class="input-group">
            <select name="filter" class="form-select" onchange="this.form.submit()">
                <option value="Tous" {% if filter == 'Tous' %}selected{% endif %}>Tous</option>
                <option value="En attente" {% if filter == 'En attente' %}selected{% endif %}>‚è≥ En attente</option>
                <option value="Trait√©e" {% if filter == 'Trait√©e' %}selected{% endif %}>‚úÖ Trait√©</option>
            </select>
        </div>
    </form>

    <!-- Liste des r√©clamations -->
    <ul class="list-group mb-4">
        {% for reclamation in reclamations %}
        <li class="list-group-item">
            <strong>{{ reclamation.sujet }}</strong> | {{ reclamation.statut }}<br>
            {{ reclamation.description }}<br>
            {% if reclamation.reponse %}
                <div class="alert alert-info mt-2">üó® R√©ponse: {{ reclamation.reponse.message }}</div>
            {% else %}
                <div class="alert alert-warning mt-2">‚è≥ En attente de r√©ponse</div>
            {% endif %}
            <form action="{{ path('app_reclamation_delete', {'id': reclamation.id}) }}" method="post" style="display:inline;" onsubmit="return confirm('Voulez-vous vraiment supprimer cette r√©clamation ?');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ reclamation.id) }}">
                <button type="submit" class="btn btn-danger btn-sm">üóë Supprimer</button>
            </form>
        </li>
        {% else %}
        <li class="list-group-item">Aucune r√©clamation trouv√©e.</li>
        {% endfor %}
    </ul>

    <!-- Formulaire d'ajout -->
    <h2>Ajouter une r√©clamation</h2>
    {{ form_start(form) }}
        {{ form_widget(form) }}
    {{ form_end(form) }}
</div>
{% endblock %}