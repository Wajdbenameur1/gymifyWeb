{% extends 'base.html.twig' %}

{% block title %}Gestion des RÃ©clamations{% endblock %}

{% block body %}
<div class="min-h-screen bg-gradient-to-r from-blue-100 to-blue-200 p-6">
    <div class="container mx-auto">
        <h1 class="text-3xl font-bold text-center mb-6 text-blue-900">ðŸ“© Gestion des RÃ©clamations</h1>
        <div class="flex flex-col md:flex-row gap-6">
            <!-- Reclamations List -->
            <div class="bg-white p-6 rounded-lg shadow-lg w-full md:w-1/3">
                <h2 class="text-xl font-bold mb-4">ðŸ“œ RÃ©clamations</h2>
                <button type="button" onclick="toggleAll('reclamation')" class="bg-green-500 text-white px-4 py-2 rounded-lg mb-4">âœ” Tout sÃ©lectionner</button>
                <div class="max-h-96 overflow-y-auto">
                    {% for reclamation in reclamations %}
                        <div class="flex items-center p-2 bg-gray-100 rounded-lg mb-2">
                            <input type="checkbox" name="selected_reclamations[]" value="{{ reclamation.id }}" class="mr-2 reclamation-checkbox">
                            <span>ðŸ“Œ {{ reclamation.user.nom|default('Utilisateur inconnu') }} {{ reclamation.user.prenom|default('') }} | {{ reclamation.sujet }} | {{ reclamation.description }}</span>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <!-- Response Form -->
            <div class="bg-white p-6 rounded-lg shadow-lg w-full md:w-1/3">
                <h2 class="text-xl font-bold mb-4">ðŸ’¬ RÃ©ponse Ã  la sÃ©lection</h2>
                {{ form_start(form) }}
                    {{ form_widget(form.message) }}
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-lg mt-4">ðŸ“© Envoyer la rÃ©ponse</button>
                {{ form_end(form) }}
            </div>
            <!-- Responses List -->
            <div class="bg-white p-6 rounded-lg shadow-lg w-full md:w-1/3">
                <h2 class="text-xl font-bold mb-4">ðŸ“¬ RÃ©ponses envoyÃ©es</h2>
                <div class="flex gap-2 mb-4">
                    <button type="button" onclick="toggleAll('reponse')" class="bg-green-500 text-white px-4 py-2 rounded-lg">âœ” Tout sÃ©lectionner</button>
                    <form action="{{ path('admin_reclamations_delete_reponses') }}" method="post">
                        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded-lg">ðŸ—‘ Supprimer sÃ©lection</button>
                        {% for reponse in reponses %}
                            <input type="checkbox" name="selected_reponses[]" value="{{ reponse.id }}" class="hidden reponse-checkbox">
                        {% endfor %}
                    </form>
                </div>
                <div class="max-h-96 overflow-y-auto">
                    {% for reponse in reponses %}
                        <div class="flex items-center p-2 bg-blue-50 rounded-lg mb-2">
                            <input type="checkbox" name="selected_reponses[]" value="{{ reponse.id }}" class="mr-2 reponse-checkbox">
                            <span>ðŸ“¨ {{ reponse.message }}</span>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function toggleAll(type) {
        const checkboxes = document.querySelectorAll(`.${type}-checkbox`);
        const allChecked = Array.from(checkboxes).every(cb => cb.checked);
        checkboxes.forEach(cb => cb.checked = !allChecked);
    }
</script>
{% endblock %}